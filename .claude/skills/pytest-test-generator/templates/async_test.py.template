"""
Tests for {{MODULE_NAME}}
Coverage target: >80%
"""
import pytest
from nautilus_trader.test_kit.stubs.data import TestDataStubs
from nautilus_trader.test_kit.stubs.identifiers import TestIdStubs
from strategies.{{MODULE_FILE}} import {{CLASS_NAME}}, {{CONFIG_NAME}}


# Fixtures
@pytest.fixture
async def {{FIXTURE_NAME}}():
    """Fixture for {{CLASS_NAME}}"""
    config = {{CONFIG_NAME}}(
        instrument_id="{{INSTRUMENT_ID}}",
    )
    strategy = {{CLASS_NAME}}(config=config)
    yield strategy
    # Cleanup if needed


# Unit Tests (RED phase - should fail initially)
@pytest.mark.asyncio
async def test_{{FUNCTION_1}}({{FIXTURE_NAME}}):
    """Test {{DESCRIPTION_1}}"""
    {{FIXTURE_NAME}}.on_start()
    assert {{FIXTURE_NAME}}.{{INDICATOR}} is not None
    # RED: Not implemented yet


@pytest.mark.asyncio
async def test_{{FUNCTION_2}}({{FIXTURE_NAME}}):
    """Test {{DESCRIPTION_2}}"""
    {{FIXTURE_NAME}}.on_start()
    bar = TestDataStubs.bar_5decimal()
    {{FIXTURE_NAME}}.on_bar(bar)
    assert {{FIXTURE_NAME}}.{{INDICATOR}}.count == 1
    # RED: Not implemented yet


# Integration Tests
@pytest.mark.asyncio
@pytest.mark.integration
async def test_integration_{{MODULE_NAME}}():
    """Test {{MODULE_NAME}} integration with BacktestNode"""
    # TODO: Add integration test with BacktestNode
    pass
