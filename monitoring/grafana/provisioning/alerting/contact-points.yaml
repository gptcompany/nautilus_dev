# monitoring/grafana/provisioning/alerting/contact-points.yaml
# Discord-only contact points for trading alerts

apiVersion: 1

contactPoints:
  # ============================================
  # Discord Notification Channels
  # ============================================
  - orgId: 1
    name: discord-critical
    receivers:
      - uid: discord-critical-receiver
        type: discord
        settings:
          url: "${DISCORD_WEBHOOK_URL}"
          avatar_url: "https://grafana.com/static/img/fav32.png"
          use_discord_username: true
          message: |
            üö® **{{ .Status | toUpper }}** - {{ .CommonLabels.alertname }}

            **Severity**: {{ .CommonLabels.severity }}
            **Category**: {{ .CommonLabels.category }}

            {{ range .Alerts }}
            üìç **{{ .Annotations.summary }}**
            {{ .Annotations.description }}
            {{ end }}
        disableResolveMessage: false

  - orgId: 1
    name: discord-all
    receivers:
      - uid: discord-all-receiver
        type: discord
        settings:
          url: "${DISCORD_WEBHOOK_URL}"
          avatar_url: "https://grafana.com/static/img/fav32.png"
          use_discord_username: true
          message: |
            {{ if eq .Status "firing" }}üî¥{{ else }}üü¢{{ end }} **{{ .Status | toUpper }}** - {{ .CommonLabels.alertname }}

            {{ range .Alerts }}
            {{ .Annotations.summary }}
            {{ end }}
        disableResolveMessage: false
